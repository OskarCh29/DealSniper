CREATE TABLE car_deals (
id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
title VARCHAR(255) NOT NULL,
price DECIMAL(15,2) NOT NULL,
currency VARCHAR(10),
offer_url VARCHAR(500) NOT NULL,
location VARCHAR(255) NOT NULL,
mileage INT,
"year" INT NOT NULL,
active BOOLEAN DEFAULT TRUE,
source_id BIGINT NOT NULL,
CONSTRAINT fk_source_id FOREIGN KEY (source_id) REFERENCES sources(id) ON DELETE CASCADE,
UNIQUE (offer_url, source_id)
);
